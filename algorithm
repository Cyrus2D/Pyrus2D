while true:
	receive message
	if decision time:
		break

body_sensor   = parse_body_sensor_message
visual_sensor = parse_visual_sensor_message
hear_sensor   = parse_hear_sensor_message
if mode == fullstate:
	fullstate_parser = parse fullstate message

update_real_world_by_last_cycle(action_effector)

update_real_world_by_body_sensor(body_sensor)
update_real_world_by_visual_sensor(visual_sensor)
update_real_world_by_hear_sensor(hear_sensor)

update_real_world_players_information()

if mode == fullstate:
	update_fullstate_world(fullstate_parser)
	update_fullstate_world_players_information()

action()

apply_view_action()
apply_neck()
apply_say_message()
apply_attention()

update_action_effector()

make_commands

send_commands